<?    # ====================================================== #    # BP2k6 - Homepage => Hall of Fame                       #    # ------------------------------------------------------ #    # (c)2006 maus / m.schmitz / maussites.de                #    # LastChange: 06.05.2006                                 #    # ====================================================== ## status / todo:  o.k.# ______________________________________________________________________________require_once ("_config.inc.php");# ______________________________________________________________________________require_once ("../bpadmin/settings.inc.php");$ThisFile = basename($_SERVER["PHP_SELF"]);################################################################# Head ausgebenrequire_once ('../global/_head.inc.php');require_once ('../global/cms/download.inc.php');################################################################# CONTENT:$MaxAbweichung = 1;   ## Max. zulaessige Abweiching in Tagen$MyTime = time ();$ThisDay = date("z",time());$bd = "27256";$team_id = $_GET["team"];$game_mode = $_GET["gamemode"];$code = $_GET["code"];$bdcode = $code;if ($DebugMode == "1") {echo "<P><B>DB-On</B><P>";}$db=mysql_connect($dbhost,$dbuser,$dbpass);                                     # open dbmysql_select_db($dbname);$GetSql = mysql_query("SELECT * FROM bpmain WHERE Art='settings'");$XTemp = mysql_fetch_row($GetSql);$AutomHoF = $XTemp[12];$ShowOwnTeamName = $XTemp[13];mysql_close($db);if ($DebugMode == "1") {echo "<P><B>DB-Off</B><P>";}require_once ('../global/cms/hofcode.inc.php');         ## load: Reverse GameCodeIf ($GameDiff <= $MaxAbweichung)                        ## check GameCode    {    MyEntry ($AutomHoF,$NeedForum,$ThisFile,$dbhost,$dbuser,$dbpass,$dbname,$dbphpbb2,$dbphpbb2_user,$dbphpbb2_pass,$bdcode,$bd,$team_id,$game_mode,$DebugMode,$code);    }    else        {        Fatal ();        }################################################################# Footer ausgebenrequire_once ('../global/_footer.inc.php');mysql_close($db);                                                               # close dbif ($DebugMode == "1") {echo "<P><B>DB-Off</B><P>";}## ----------------------------------------------------------------------------- Funktionen#______________________________________________________________________  ####### Eintrag abweisenfunction Fatal () {?><HR SIZE="1"><P><span class="alarm"><B>Es ist ein Fehler aufgetreten!</B></span><P>Der übermittelte Code konnte nicht zugewiesen werden :(<BR>Vielleicht hast Du einen alten link benutzt?<P>Sollte dennoch ein Problem bestehen, wende Dich bitte <a href="contact.php"><B><u>hier</u></B></a> mit folgenden Angaben an XENOAGE:<BR><TT><?echo "<BR>teamid:".$_GET["team"];echo "<BR>gamemode:".$_GET["gamemode"];echo "<BR>gamecode:".$_GET["code"];echo "<BR>int:".(time ())*214;echo "<BR>link:".$_SERVER['QUERY_STRING'];?></TT><P><HR SIZE="1"><?}#______________________________________________________________________  ####### Eintrag annehmenfunction MyEntry ($AutomHoF,$NeedForum,$ThisFile,$dbhost,$dbuser,$dbpass,$dbname,$dbphpbb2,$dbphpbb2_user,$dbphpbb2_pass,$bdcode,$bd,$team_id,$game_mode,$DebugMode,$code) {$gamesubmit = $_SERVER['QUERY_STRING'];################################################################## username/passwort eingebenif ($_POST["fname"] == "" && $_POST["fpass"] == "" && $NeedForum == "1") {?><span class="head"><B>HERZLICHEN GLÜCKWUNSCH!<br>Du kannst Dich nun in der Hall of Fame eintragen:</B></span><BR><img src="../global/grafik/pose/topplass_ns.gif" align="Right" border="0" width="165" height="185"><BR><BR><B>Um Dich eintragen zu können, musst Du im Forum registriert* sein.</B><BR>Solltest Du noch nicht registriert sein, kannst Du es <a href="forum.php" target="_blank">hier jetzt nachholen.</a><BR><BR><BR><form action="<? echo $ThisFile."?".$gamesubmit;?>" method="post"><UL><TABLE BORDER="0" CELLSPACING="5"><TR><TD COLSPAN="2"><B>Bitte gebe Deine Zugangsdaten ein:</B></TD></TR><TR><TD>Username:</TD><TD><INPUT TYPE="text" NAME="fname" SIZE="30" MAXLENGTH="80"></TD></TR><TR><TD>Passwort:</TD><TD><INPUT TYPE="password" NAME="fpass" SIZE="30" MAXLENGTH="80"></TD></TR><TR><TD>&nbsp;</TD><TD><INPUT TYPE="submit" VALUE="Anmelden"></TD></TR></TABLE></UL></form><BR><BR><HR SIZE="1">* Um Mißbrauch vorzubeugen, ist ein eintragen in die Hall of Fame nur mit gültiger Forumsregistrierung möglich.Registriere Dich einfach <a href="forum.php" target="_blank">im Forum</a>, schließe anschließend das Fenster der Registrierung, und fahre hier mit Deinem Eintrag fort!<HR SIZE="1"><?}if ((($_POST["crupass"] != "" && $NeedForum == "0")) or (($_POST["crupass"] != "" && $NeedForum == "1")))    {################################################################## eintrag speichern    if ($DebugMode == "1")        {        echo "<BR>".$code;                    # TimeStamp vom Game        echo "<BR>".$_POST["fname"];          # Forum Name        echo "<BR>".$_POST["crupass"];        # Forum Passwort        echo "<BR>".$_POST["username"];       # HoF Name        echo "<BR>".$_POST["userland"];       # HoF Land        echo "<BR>".$_POST["usertown"];       # HoF Stadt        echo "<BR>".$_POST["teamid"];         # Team-ID (von Game)        echo "<BR>".$_POST["userteamname"];   # TeamName (von Game bzw. eigener)        echo "<BR>".$_POST["gamemode"];       # gamemode        }    $timenow = date("d.m.Y H:i:s",time());    $Server = $_SERVER['REMOTE_ADDR'].",".gethostbyaddr($_SERVER['REMOTE_ADDR']);    $TeamID = $_POST["teamid"];    $myname = $_POST["username"];    $FName = $_POST["fname"];    $FPass = $_POST["crupass"];    $myland = $_POST["userland"];    $mytown = $_POST["usertown"];    $myteamname = $_POST["userteamname"];    $gamemode = $_POST["gamemode"];    if ($gamemode != "worldcup")        {        $TableTeams = "hof_teams";        $TableUsers = "hof_user";        }        else {              $TableTeams = "hof_teams_wc";              $TableUsers = "hof_user_wc";              }    require_once ('../global/cms/hof-writeentry.inc.php');    mysql_close($db);    if ($DebugMode == "1") {echo "<P><B>DB-Off</B><P>";}    echo "<CENTER><BR><BR><BR><BR><B>Deine Daten wurden eingetragen!&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</B></CENTER>";    if ($gamemode == "worldcup")        {        echo '<META HTTP-EQUIV="Refresh" CONTENT="2; URL=wm.php">';        }        else {             echo '<META HTTP-EQUIV="Refresh" CONTENT="2; URL=allstarsleague.php">';             }    }   else {   if ((($_POST["fname"] != "" || $_POST["fpass"] != "") and ($_POST["crupass"] == "")) or ($NeedForum == "0"))        {################################################################## username/passwort pruefen$UserName = $_POST["fname"];$UserPass = md5($_POST["fpass"]);$crupass = $_POST["crupass"];if ($DebugMode == "1") {echo "<P><B>DB-On</B><P>";}$db=mysql_connect($dbhost,$dbphpbb2_user,$dbphpbb2_pass);                                     # open db (forum)mysql_select_db($dbphpbb2);$GetSql = mysql_query("SELECT * FROM phpbb_users WHERE username='$UserName'");$XTemp = mysql_fetch_row($GetSql);if ($NeedForum == "1")    {    if (($UserPass != $XTemp[3] && $crupass != $XTemp[3] || $XTemp[2] == "") and ($bdcode != $bd))         {         echo '<META HTTP-EQUIV="Refresh" CONTENT="0; URL='.$ThisFile."?0&".$gamesubmit.'">';         echo "<BR><BR><CENTER><a href=\"$ThisFile?0&$gamesubmit\"><U>go</U></a></CENTER>";         die;         }    }################################################################## daten eingeben$PreName = $XTemp[2]; if ($PreName == "") {$PreName = "NoName";}$PreTown = $XTemp[37];?><span class="head"><B>HERZLICHEN GLÜCKWUNSCH!<br>Du kannst Dich nun in der Hall of Fame eintragen:</B></span><BR><BR><BR><script language="JavaScript"><!--function isEmpty () {var felder="";if(document.hofform.username.value.length == 0){ felder += "\n >> Name "; }if(document.hofform.usertown.value.length == 0){ felder += "\n >> Stadt "; }if(document.hofform.userteamname.value.length == 0){ felder += "\n >> Teamname "; }if ( felder == "" ) {document.forms.hofform.submit();} else {        alert( "Bitte fülle folgende Felder aus: \n" + felder);        }}//--></script><form action="<? echo $ThisFile."?".$gamesubmit;?>" method="post" name="hofform" onSubmit="javascript:isEmpty(); return false;"><INPUT TYPE="hidden" NAME="teamid" VALUE="<? echo $team_id; ?>"><INPUT TYPE="hidden" NAME="fname" VALUE="<? echo $PreName; ?>"><INPUT TYPE="hidden" NAME="crupass" VALUE="<? echo md5($_POST["fpass"]); ?>"><UL><TABLE BORDER="0" CELLSPACING="0" CELLPADDING="13" class="outertablebg"><TR><TD VALIGN="Middle" class="marktabletd2">Dein Name:</TD><TD VALIGN="Middle" class="marktabletd2"><INPUT TYPE="text" NAME="username" SIZE="40" MAXLENGTH="50" value="<? echo $PreName; ?>"></TD></TR><TR><TD VALIGN="Middle" class="marktabletd2">Du kommst aus:</TD><TD VALIGN="Middle" class="marktabletd2"><? ShowLands (); ?></TD></TR><TR><TD VALIGN="Middle" class="marktabletd2">Stadt:</TD><TD VALIGN="Middle" class="marktabletd2"><INPUT TYPE="text" NAME="usertown" SIZE="40" MAXLENGTH="35" value="<? echo $PreTown; ?>"></TD></TR><TR><TD VALIGN="Middle" class="marktabletd2">Name Deines Teams:<? echo "-$gamemode-"; ?></TD><TD VALIGN="Middle" class="marktabletd2"><?mysql_close($db);if ($DebugMode == "1") {echo "<P><B>DB-Off</B><P>";}$gamemode = $_GET["gamemode"];if ($gamemode != "worldcup")    {    $TableTeams = "hof_teams";    $TableUsers = "hof_user";    }    else {          $TableTeams = "hof_teams_wc";          $TableUsers = "hof_user_wc";          }if ($DebugMode == "1") {echo "<P><B>DB-On</B><P>";}$db=mysql_connect($dbhost,$dbuser,$dbpass);                                     # open dbmysql_select_db($dbname);$GetSql = mysql_query("SELECT * FROM $TableTeams WHERE TeamID='$team_id'");$XTemp = mysql_fetch_row($GetSql);if ($XTemp[2] != "")    {    echo "<B>".$XTemp[2]."</B>";    ?>    <INPUT TYPE="hidden" NAME="userteamname" VALUE="<? echo $XTemp[2]; ?>">    <INPUT TYPE="hidden" NAME="gamemode" VALUE="<? echo $game_mode; ?>">    <?    }    else {         echo '<INPUT TYPE="text" NAME="userteamname" SIZE="40" MAXLENGTH="50" value="'.$team_id.'">';         echo '<INPUT TYPE="hidden" NAME="gamemode" VALUE="own">';         }?></TD></TR><TR><TD VALIGN="Middle" class="marktabletd">&nbsp; </TD><TD VALIGN="Middle" class="marktabletd"><INPUT TYPE="submit" VALUE="Jetzt Eintragen!">&nbsp;&nbsp;&nbsp;<INPUT TYPE="Reset" VALUE="Reset"></TD></TR></TABLE><?mysql_close($db);if ($DebugMode == "1") {echo "<P><B>DB-Off</B><P>";}echo '</form></UL>';}}}#-------------------------------------------------------------------------------function ShowLands () {## maoz sagt: WHAT a FUCKING JOB to convert these FileNames (*.gif) => LandNames  ;)?><SELECT NAME="userland"><OPTION VALUE="afghanistan">Afghanistan<OPTION VALUE="albania">Albania<OPTION VALUE="algeria">Algeria<OPTION VALUE="andorra">Andorra<OPTION VALUE="angola">Angola<OPTION VALUE="antiguabarbuda">Antiguabarbuda<OPTION VALUE="argentina">Argentina<OPTION VALUE="armenia">Armenia<OPTION VALUE="australia">Australia<OPTION VALUE="austria">Austria<OPTION VALUE="azerbaijan">Azerbaijan<OPTION VALUE="bahamas">Bahamas<OPTION VALUE="bahrain">Bahrain<OPTION VALUE="bangladesh">Bangladesh<OPTION VALUE="barbados">Barbados<OPTION VALUE="belarus">Belarus<OPTION VALUE="belgium">Belgium<OPTION VALUE="belize">Belize<OPTION VALUE="benin">Benin<OPTION VALUE="bhutan">Bhutan<OPTION VALUE="bolivia">Bolivia<OPTION VALUE="bosnia_herzegovina">Bosnia Herzegovina<OPTION VALUE="botswana">Botswana<OPTION VALUE="brazil">Brazil<OPTION VALUE="brunei">Brunei<OPTION VALUE="bulgaria">Bulgaria<OPTION VALUE="burkinafaso">Burkinafaso<OPTION VALUE="burma">Burma<OPTION VALUE="burund">Burund<OPTION VALUE="cambodia">Cambodia<OPTION VALUE="cameroon">Cameroon<OPTION VALUE="canada">Canada<OPTION VALUE="centralafricanrep">Central African Rep.<OPTION VALUE="chad">Chad<OPTION VALUE="chile">Chile<OPTION VALUE="china">China<OPTION VALUE="columbia">Columbia<OPTION VALUE="comoros">Comoros<OPTION VALUE="congo">Congo<OPTION VALUE="costarica">Costarica<OPTION VALUE="croatia">Croatia<OPTION VALUE="cuba">Cuba<OPTION VALUE="cyprus">Cyprus<OPTION VALUE="czechrepublic">Czech Republic<OPTION VALUE="demrepcongo">Dem.Rep. Congo<OPTION VALUE="denmark">Denmark<OPTION VALUE="germany" selected>Deutschland<OPTION VALUE="djiboutil">Djiboutil<OPTION VALUE="dominica">Dominica<OPTION VALUE="dominicanrep">Dominicanrep<OPTION VALUE="ecuador">Ecuador<OPTION VALUE="egypt">Egypt<OPTION VALUE="elsalvado">Elsalvado<OPTION VALUE="eq_guinea">Eq Guinea<OPTION VALUE="eritrea">Eritrea<OPTION VALUE="estonia">Estonia<OPTION VALUE="ethiopia">Ethiopia<OPTION VALUE="europe">Europe<OPTION VALUE="fiji">Fiji<OPTION VALUE="finland">Finland<OPTION VALUE="france">France<OPTION VALUE="gabon">Gabon<OPTION VALUE="gambia">Gambia<OPTION VALUE="georgia">Georgia<OPTION VALUE="ghana">Ghana<OPTION VALUE="greece">Greece<OPTION VALUE="grenada">Grenada<OPTION VALUE="grenadines">Grenadines<OPTION VALUE="guatemala">Guatemala<OPTION VALUE="guineabissau">Guineabissau<OPTION VALUE="guineal">Guineal<OPTION VALUE="guyana">Guyana<OPTION VALUE="haiti">Haiti<OPTION VALUE="honduras">Honduras<OPTION VALUE="hong_kong">Hong Kong<OPTION VALUE="hungary">Hungary<OPTION VALUE="iceland">Iceland<OPTION VALUE="india">India<OPTION VALUE="indonesia">Indonesia<OPTION VALUE="iran">Iran<OPTION VALUE="iraq">Iraq<OPTION VALUE="ireland">Ireland<OPTION VALUE="israel">Israel<OPTION VALUE="italy">Italy<OPTION VALUE="ivorycoast">Ivorycoast<OPTION VALUE="jamaica">Jamaica<OPTION VALUE="japan">Japan<OPTION VALUE="jordan">Jordan<OPTION VALUE="kazakhstan">Kazakhstan<OPTION VALUE="kenya">Kenya<OPTION VALUE="kiribati">Kiribati<OPTION VALUE="kuwait">Kuwait<OPTION VALUE="kyrgyzstan">Kyrgyzstan<OPTION VALUE="laos">Laos<OPTION VALUE="latvia">Latvia<OPTION VALUE="lebanon">Lebanon<OPTION VALUE="liberia">Liberia<OPTION VALUE="libya">Libya<OPTION VALUE="liechtenstein">Liechtenstein<OPTION VALUE="lithuania">Lithuania<OPTION VALUE="luxembourg">Luxembourg<OPTION VALUE="macadonia">Macadonia<OPTION VALUE="macau">Macau<OPTION VALUE="madagascar">Madagascar<OPTION VALUE="malawi">Malawi<OPTION VALUE="malaysia">Malaysia<OPTION VALUE="maldives">Maldives<OPTION VALUE="mali">Mali<OPTION VALUE="malta">Malta<OPTION VALUE="mauritania">Mauritania<OPTION VALUE="mauritius">Mauritius<OPTION VALUE="mexico">Mexico<OPTION VALUE="micronesia">Micronesia<OPTION VALUE="moldova">Moldova<OPTION VALUE="monaco">Monaco<OPTION VALUE="mongolia">Mongolia<OPTION VALUE="morocco">Morocco<OPTION VALUE="mozambique">Mozambique<OPTION VALUE="namibia">Namibia<OPTION VALUE="nauru">Nauru<OPTION VALUE="neth_antilles">Neth Antilles<OPTION VALUE="netherlands">Netherlands<OPTION VALUE="newzealand">Newzealand<OPTION VALUE="nicaragua">Nicaragua<OPTION VALUE="niger">Niger<OPTION VALUE="nigeria">Nigeria<OPTION VALUE="north_korea">North Korea<OPTION VALUE="norway">Norway<OPTION VALUE="oman">Oman<OPTION VALUE="pakistan">Pakistan<OPTION VALUE="panama">Panama<OPTION VALUE="papuanewguinea">Papuanewguinea<OPTION VALUE="paraguay">Paraguay<OPTION VALUE="peru">Peru<OPTION VALUE="philippines">Philippines<OPTION VALUE="poland">Poland<OPTION VALUE="portugal">Portugal<OPTION VALUE="puertorico">Puertorico<OPTION VALUE="qatar">Qatar<OPTION VALUE="rawanda">Rawanda<OPTION VALUE="romania">Romania<OPTION VALUE="russia">Russia<OPTION VALUE="sao_tome">Sao Tome<OPTION VALUE="saudiarabiav">Saudiarabiav<OPTION VALUE="senegal">Senegal<OPTION VALUE="serbia">Serbia<OPTION VALUE="seychelles">Seychelles<OPTION VALUE="sierraleone">Sierraleone<OPTION VALUE="singapore">Singapore<OPTION VALUE="slovakia">Slovakia<OPTION VALUE="slovenia">Slovenia<OPTION VALUE="solomon_islands">Solomon Islands<OPTION VALUE="somalia">Somalia<OPTION VALUE="south_korea">South Korea<OPTION VALUE="southafrica">South Africa<OPTION VALUE="spain">Spain<OPTION VALUE="srilanka">Srilanka<OPTION VALUE="stkitts_nevis">Stkitts Nevis<OPTION VALUE="stlucia">Stlucia<OPTION VALUE="sudan">Sudan<OPTION VALUE="suriname">Suriname<OPTION VALUE="sweden">Sweden<OPTION VALUE="switzerland">Switzerland<OPTION VALUE="syria">Syria<OPTION VALUE="taiwan">Taiwan<OPTION VALUE="tajikistan">Tajikistan<OPTION VALUE="tanzania">Tanzania<OPTION VALUE="thailand">Thailand<OPTION VALUE="togo">Togo<OPTION VALUE="tonga">Tonga<OPTION VALUE="trinidadandtobago">Trinidad and Tobago<OPTION VALUE="tunisia">Tunisia<OPTION VALUE="turkey">Turkey<OPTION VALUE="turkmenistan">Turkmenistan<OPTION VALUE="tuvala">Tuvala<OPTION VALUE="uae">UAE<OPTION VALUE="uganda">Uganda<OPTION VALUE="uk">United Kingdom<OPTION VALUE="ukraine">Ukraine<OPTION VALUE="uruguay">Uruguay<OPTION VALUE="usa">USA<OPTION VALUE="ussr">USSR<OPTION VALUE="uzbekistan">Uzbekistan<OPTION VALUE="vanuatu">Vanuatu<OPTION VALUE="vatikan">Vatikan<OPTION VALUE="venezuela">Venezuela<OPTION VALUE="vietnam">Vietnam<OPTION VALUE="western_samoa">Western Samoa<OPTION VALUE="yemen">Yemen<OPTION VALUE="yugoslavia">Yugoslavia<OPTION VALUE="zaire">Zaire<OPTION VALUE="zambia">Zambia<OPTION VALUE="zimbabwe">Zimbabwe</SELECT><?}?></body></html>